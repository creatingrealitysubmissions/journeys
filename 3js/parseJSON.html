<html>
    <head>
        <script>
        // Parse the JSON
        var jsonURL = "journeys.json";
        console.log(jsonURL);

        var fetchData = function(userID,JTitle) {
            var xhttp = new XMLHttpRequest();

            xhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {

                    // Read JSON ddata
                    jsonObj = JSON.parse(xhttp.responseText);

                    // Check if user exists in JSON file
                    if (userID in jsonObj.Users) { 

                        // Check if user has any journeys
                        userJourneys = jsonObj.Users[userID].Journeys;
                        
                        if (Object.keys(userJourneys).length != 0) {

                            //Check if selected journey exists in the user's journey
                            if (JTitle in userJourneys) {

                                // Read the waypoints of the journey
                                journeyWaypoints = userJourneys[JTitle].Waypoints;

                                // For each waypoint, do the following:
                                for (let i = 0; i < journeyWaypoints.length; i++) {

                                    // Location
                                    console.log(journeyWaypoints[i].Location);

                                    //For each Content point:
                                    for (let j = 0; j < journeyWaypoints[i].ContentPoints.length; j++) {
                                        
                                        // Do something with the content point
                                        console.log(journeyWaypoints[i].ContentPoints[j]);  
                                        
                                    }  
                                }
                            }
                        }


                    }
                    else {
                        console.log("user not found");
                    }
                }
            };
            xhttp.open("GET",jsonURL, true);
            xhttp.send();
        }


        fetchData("U001","First Award");
        </script>
    </head>
</html>
